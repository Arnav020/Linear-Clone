# Project Structure & Documentation

This document provides a comprehensive overview of the `linear-clone` project structure, explaining the role, function, and purpose of each file and directory.

## Root Directory

The root directory contains configuration files and project metadata.

-   **`.env.local`**: Stores local environment variables, primarily Supabase credentials (`NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`) and the Gemini API key (`GOOGLE_GENERATIVE_AI_API_KEY`).
-   **`.git/`**: Git version control repository data.
-   **`.gitignore`**: Specifies files and directories to be ignored by Git (e.g., `node_modules`, `.next`, secrets).
-   **`.next/`**: Build output directory generated by Next.js.
-   **`.vscode/`**: VS Code specific settings (e.g., workspace settings, extensions).
-   **`eslint.config.mjs`**: ESLint configuration file for code linting rules (using the flat config format).
-   **`linear_clone.png`**: Project screenshot or asset.
-   **`next-env.d.ts`**: TypeScript declaration file generated by Next.js to ensure types for Next.js features are available.
-   **`next.config.ts`**: Next.js configuration file (defines build settings, rewrites, headers, etc.).
-   **`node_modules/`**: Contains all installed npm project dependencies.
-   **`package.json`**: Defines project metadata, dependencies (e.g., Next.js, React, Supabase), and scripts (`dev`, `build`, `start`).
-   **`package-lock.json`**: Locks dependency versions to ensure consistent installs.
-   **`postcss.config.mjs`**: Configuration for PostCSS, used by Tailwind CSS.
-   **`public/`**: Static assets serving directory (e.g., images, favicons).
-   **`README.md`**: General project documentation.
-   **`seed-projects.js`**: A Node.js script to seed the Database with initial data. It connects to Supabase and creates sample projects ("Linear Clone", "Mobile App", etc.) and re-assigns existing issues to these projects. Use it to populate a fresh database.
-   **`tsconfig.json`**: TypeScript compiler configuration options.

## `src/` Directory

This directory contains the main application source code.

### `src/app/` (Next.js App Router)

This directory handles the application's routing, pages, and server-side logic.

-   **`actions/`**: Contains Next.js Server Actions.
    -   **`ai.ts`**: Server actions for interfacing with the Gemini AI API.
        -   `analyzeIssueAction`: Analyzes issue text to suggest priority, status, complexity, etc.
        -   `generateIssueDetailsAction`: Generates rich descriptions from simple titles.
        -   `prioritizeBatchAction`: Reviews a list of backlog issues and suggests candidates for "Todo".
-   **`dashboard/`**: The main authenticated application view.
    -   **`page.tsx`**: The dashboard page component (likely renders `BoardView` or `ListView`).
    -   **`layout.tsx`**: Layout specific to the dashboard (e.g., Sidebar + Topbar wrapper).
    -   **`loading.tsx`**: Loading UI state for the dashboard.
-   **`login/`**: Login route.
    -   **`page.tsx`**: Login page component.
-   **`signup/`**: Signup route.
    -   **`page.tsx`**: Signup page component.
-   **`globals.css`**: Global CSS styles, including Tailwind CSS directives and custom variable definitions (e.g., colors).
-   **`layout.tsx`**: The Root Layout component that wraps the entire application (HTML structure, body tags, providers).
-   **`page.tsx`**: The Landing Page component. It displays the marketing hero section ("Linear is a purpose-built tool...") and navigation links.

### `src/components/`

Contains reusable React components used throughout the application.

#### Core Layout & Navigation
-   **`AppShell.tsx`**: Likely a wrapper for the authenticated UI structure.
-   **`Sidebar.tsx`**: The left-hand navigation sidebar displaying projects, user profile, and primary navigation links.
-   **`Topbar.tsx`**: The top header bar containing search, theme toggles, or breadcrumbs.
-   **`CommandMenu.tsx`**: implementation of a "Ctrl+K" / "Cmd+K" command palette menu.
-   **`ViewToggle.tsx`**: Switcher for toggling between List and Board views.

#### Issue Management
-   **`IssueCard.tsx`**: Displays a single issue in the Kanban board view.
-   **`IssueListItem.tsx`**: Displays a single issue in the List view.
-   **`IssueDetailModal.tsx`**: Modal for viewing and editing full details of an issue.
-   **`NewIssueModal.tsx`**: Modal form for creating a new issue.
-   **`NewIssueTrigger.tsx`**: Button or element that opens the New Issue Modal.
-   **`IssueCheckbox.tsx`**: Custom checkbox component for selecting issues.
-   **`BoardView.tsx`**: The Kanban board visualization of issues grouped by status.
-   **`ListView.tsx`**: The list visualization of issues.
-   **`BoardColumn.tsx`**: A single column in the Kanban board (e.g., "Todo", "In Progress").
-   **`CollapsibleIssueGroup.tsx`**: Collapsible header for grouping issues in list view.
-   **`IssueGroup.tsx`**: Container for a group of issues.

#### Project Management
-   **`ProjectsList.tsx`**: Component to list available projects.
-   **`ProjectSelector.tsx`**: Dropdown or UI to switch between active projects.
-   **`NewProjectModal.tsx`**: Modal form for creating a new project.
-   **`ProjectViews.tsx`**: Components related to project-specific views.

#### Dropdowns & Inputs
-   **`AssigneeDropdown.tsx`**: Dropdown to assign a user to an issue.
-   **`LabelDropdown.tsx`**: Dropdown to manage issue labels.
-   **`PriorityDropdown.tsx`**: Dropdown to set issue priority (Urgent, High, etc.).
-   **`StatusDropdown.tsx`**: Dropdown to set issue status (Backlog, Todo, etc.).
-   **`BulkActionsMenu.tsx`**: Menu that appears when multiple issues are selected (e.g., for bulk delete/update).

#### AI Features
-   **`AIPrioritizeButton.tsx`**: Button to trigger AI prioritization logic.
-   **`AIRecommendationModal.tsx`**: Modal displaying AI suggestions for issue prioritization.

#### Icons & Visuals
-   **`PriorityIcon.tsx`**: SVG icon component for different priorities.
-   **`StatusIcon.tsx`**: SVG icon component for different statuses.

### `src/context/`

React Context providers for state management.

-   **`UserContext.tsx`**: Manages current user state (authentication, user profile).
-   **`IssueSelectionContext.tsx`**: Manages state for selected issues (e.g., for bulk actions).
-   **`UIContext.tsx`**: Manages global UI state (e.g., active modals, sidebar visibility).
-   **`ViewFilterContext.tsx`**: Manages filtering state for issue views.

### `src/lib/`

Utility functions and libraries.

-   **`gemini.ts`**: Configuration and client initialization for Google's Gemini AI. Defines `getGeminiModel`.
-   **`supabase.ts`**: Supabase client initialization and TypeScript type definitions for the database schema.

## Database Schema

Inferred from `src/lib/supabase.ts`, the database consists of the following tables:

-   **`users`**:
    -   `id` (PK): User ID.
    -   `email`, `name`, `avatar_url`: User profile info.
    -   `created_at`: Timestamp.
-   **`projects`**:
    -   `id` (PK): Project ID.
    -   `name`: Project name.
    -   `description`, `key`, `color`, `icon`: Project metadata.
    -   `status`: Project status.
    -   `created_by` (FK -> users.id): Creator of the project.
-   **`issues`**:
    -   `id` (PK): Issue ID.
    -   `title`: Issue title.
    -   `description`: Markdown description.
    -   `status`, `priority`: Enums/Strings.
    -   `project_id` (FK -> projects.id): Associated project.
    -   `assignee_id` (FK -> users.id): Assigned user.
    -   `created_by` (FK -> users.id): Creator.
    -   `duplicate_of` (FK -> issues.id): For duplicate linking.
    -   `labels`: Array of strings.
-   **`project_members`**:
    -   `id` (PK): Membership ID.
    -   `project_id` (FK -> projects.id).
    -   `user_id` (FK -> users.id).
    -   `role`: User role in the project.
-   **`project_stats`** (View):
    -   Aggregates counts (member_count, issue_count, completed_issues) for projects.
